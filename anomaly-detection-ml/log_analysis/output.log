Executing cron job
Executing cron job
Executing cron job
Executing cron job
Executing cron job
2023-04-22 03:41:01.334206 2023-04-23 03:41:01.334206
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 75, in <module>
    from elasticsearch import Elasticsearch
ModuleNotFoundError: No module named 'elasticsearch'
2023-04-22 03:42:01.466449 2023-04-23 03:42:01.466449
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 75, in <module>
    from elasticsearch import Elasticsearch
ModuleNotFoundError: No module named 'elasticsearch'
2023-04-22 03:43:01.587143 2023-04-23 03:43:01.587143
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 75, in <module>
    from elasticsearch import Elasticsearch
ModuleNotFoundError: No module named 'elasticsearch'
2023-04-22 03:44:01.811374 2023-04-23 03:44:01.811374
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 75, in <module>
    from elasticsearch import Elasticsearch
ModuleNotFoundError: No module named 'elasticsearch'
2023-04-22 03:45:01.231574 2023-04-23 03:45:01.231574
2023-04-22 03:45:05.026868 2023-04-23 03:45:05.026868
2023-04-22 03:45:48.983450 2023-04-23 03:45:48.983450
2023-04-22 03:46:51.887374 2023-04-23 03:46:51.887374
2023-04-22 03:49:46.845741 2023-04-23 03:49:46.845741
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
2023-04-22 03:50:01.516920 2023-04-23 03:50:01.516920
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
2023-04-22 03:55:02.042707 2023-04-23 03:55:02.042707
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
2023-04-22 04:01:57.065369 2023-04-23 04:01:57.065369
2023-04-22 04:10:01.444704 2023-04-23 04:10:01.444704
2023-04-22 04:11:53.028112 2023-04-23 04:11:53.028112
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.061605]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2379 samples in 0.000s...
[t-SNE] Computed neighbors for 2379 samples in 0.056s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2379
[t-SNE] Computed conditional probabilities for sample 2000 / 2379
[t-SNE] Computed conditional probabilities for sample 2379 / 2379
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 29.922472
[t-SNE] KL divergence after 300 iterations: -0.221057
              K-means  Isolation Forest
f1_score     0.400000           0.00084
accuracy     0.998739           0.00042
sensitivity  1.000000               NaN
specificity  0.250000           0.00042
recall       1.000000           1.00000
2023-04-22 04:30:01.102792 2023-04-23 04:30:01.102792
2023-04-22 04:46:34.153960 2023-04-23 04:46:34.153960
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.232048]
Loading data/structured/Java/application.log_structured.csv
2023-04-22 04:50:28.504321 2023-04-23 04:50:28.504321
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.276092]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2384 samples in 0.001s...
[t-SNE] Computed neighbors for 2384 samples in 0.061s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2384
[t-SNE] Computed conditional probabilities for sample 2000 / 2384
[t-SNE] Computed conditional probabilities for sample 2384 / 2384
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 30.004827
[t-SNE] KL divergence after 300 iterations: -0.202769
              K-means  Isolation Forest
f1_score     0.285714          0.666667
accuracy     0.997903          0.999581
sensitivity  1.000000          1.000000
specificity  0.166667          0.500000
recall       1.000000          1.000000
{'start_time': Timestamp('2023-04-23 04:35:00'), 'end_time': Timestamp('2023-04-23 04:40:00'), 'k_means_metrics': {'f1_score': 0.2857142857142857, 'accuracy': 0.9979026845637584, 'sensitivity': 1.0, 'specificity': 0.16666666666666666, 'recall': 1.0, 'anomaly_score': 0.2520270742594737}, 'isolation_forest_metrics': {'f1_score': 0.6666666666666666, 'accuracy': 0.9995805369127517, 'sensitivity': 1.0, 'specificity': 0.5, 'recall': 1.0, 'anomaly_score': -0.07322341998012455}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 36, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'44bf45f7_count': 0, '1446c0e4_count': 0, 'e811627e_count': 0, '28de9fde_count': 0, 'c0731fc8_count': 8, 'cc7be3e7_count': 0, 'b23d1fae_count': 0, 'e46fff79_count': 12, 'a2da2da6_count': 0, '94ca10d1_count': 0, 'f6b586ef_count': 0, '81f0209d_count': 4, 'e9469db0_count': 4, '9fa80daf_count': 8}}
2023-04-22 04:51:59.365484 2023-04-23 04:51:59.365484
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.304150]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2384 samples in 0.000s...
[t-SNE] Computed neighbors for 2384 samples in 0.060s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2384
[t-SNE] Computed conditional probabilities for sample 2000 / 2384
[t-SNE] Computed conditional probabilities for sample 2384 / 2384
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 30.006065
[t-SNE] KL divergence after 300 iterations: -0.202869
              K-means  Isolation Forest
f1_score     0.285714          0.000000
accuracy     0.997903          0.997483
sensitivity  1.000000          0.999580
specificity  0.166667          0.000000
recall       1.000000          0.000000
{'start_time': Timestamp('2023-04-23 04:35:00'), 'end_time': Timestamp('2023-04-23 04:40:00'), 'k_means_metrics': {'f1_score': 0.2857142857142857, 'accuracy': 0.9979026845637584, 'sensitivity': 1.0, 'specificity': 0.16666666666666666, 'recall': 1.0, 'anomaly_score': 1.1740692263939703}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.99748322147651, 'sensitivity': 0.9995796553173603, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.0735774185043494}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 45, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'44bf45f7_count': 0, '1446c0e4_count': 0, 'e811627e_count': 0, '28de9fde_count': 0, 'c0731fc8_count': 10, 'cc7be3e7_count': 0, 'b23d1fae_count': 0, 'e46fff79_count': 15, 'a2da2da6_count': 0, '94ca10d1_count': 0, 'f6b586ef_count': 0, '81f0209d_count': 5, 'e9469db0_count': 5, '9fa80daf_count': 10}}
2023-04-22 04:55:02.520360 2023-04-23 04:55:02.520360
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.333755]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2384 samples in 0.000s...
[t-SNE] Computed neighbors for 2384 samples in 0.054s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2384
[t-SNE] Computed conditional probabilities for sample 2000 / 2384
[t-SNE] Computed conditional probabilities for sample 2384 / 2384
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 30.006187
[t-SNE] KL divergence after 300 iterations: -0.201418
              K-means  Isolation Forest
f1_score     0.285714          0.000000
accuracy     0.997903          0.997483
sensitivity  1.000000          0.999580
specificity  0.166667          0.000000
recall       1.000000          0.000000
{'start_time': Timestamp('2023-04-23 04:35:00'), 'end_time': Timestamp('2023-04-23 04:40:00'), 'k_means_metrics': {'f1_score': 0.2857142857142857, 'accuracy': 0.9979026845637584, 'sensitivity': 1.0, 'specificity': 0.16666666666666666, 'recall': 1.0, 'anomaly_score': 1.2055816280325122}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.99748322147651, 'sensitivity': 0.9995796553173603, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.0735774185043494}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 54, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'44bf45f7_count': 0, '1446c0e4_count': 0, 'e811627e_count': 0, '28de9fde_count': 0, 'c0731fc8_count': 12, 'cc7be3e7_count': 0, 'b23d1fae_count': 0, 'e46fff79_count': 18, 'a2da2da6_count': 0, '94ca10d1_count': 0, 'f6b586ef_count': 0, '81f0209d_count': 6, 'e9469db0_count': 6, '9fa80daf_count': 12}}
2023-04-22 04:56:01.326434 2023-04-23 04:56:01.326434
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.358762]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2384 samples in 0.000s...
[t-SNE] Computed neighbors for 2384 samples in 0.090s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2384
[t-SNE] Computed conditional probabilities for sample 2000 / 2384
[t-SNE] Computed conditional probabilities for sample 2384 / 2384
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 30.011993
[t-SNE] KL divergence after 300 iterations: -0.205986
              K-means  Isolation Forest
f1_score     0.285714          0.000000
accuracy     0.997903          0.997483
sensitivity  1.000000          0.999580
specificity  0.166667          0.000000
recall       1.000000          0.000000
{'start_time': Timestamp('2023-04-23 04:35:00'), 'end_time': Timestamp('2023-04-23 04:40:00'), 'k_means_metrics': {'f1_score': 0.2857142857142857, 'accuracy': 0.9979026845637584, 'sensitivity': 1.0, 'specificity': 0.16666666666666666, 'recall': 1.0, 'anomaly_score': 1.232447788084803}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.99748322147651, 'sensitivity': 0.9995796553173603, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.0735774185043494}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 63, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'44bf45f7_count': 0, '1446c0e4_count': 0, 'e811627e_count': 0, '28de9fde_count': 0, 'c0731fc8_count': 14, 'cc7be3e7_count': 0, 'b23d1fae_count': 0, 'e46fff79_count': 21, 'a2da2da6_count': 0, '94ca10d1_count': 0, 'f6b586ef_count': 0, '81f0209d_count': 7, 'e9469db0_count': 7, '9fa80daf_count': 14}}
2023-04-22 04:57:01.864612 2023-04-23 04:57:01.864612
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.419137]
Loading data/structured/Java/application.log_structured.csv
[t-SNE] Computing 121 nearest neighbors...
[t-SNE] Indexed 2384 samples in 0.000s...
[t-SNE] Computed neighbors for 2384 samples in 0.061s...
[t-SNE] Computed conditional probabilities for sample 1000 / 2384
[t-SNE] Computed conditional probabilities for sample 2000 / 2384
[t-SNE] Computed conditional probabilities for sample 2384 / 2384
[t-SNE] Mean sigma: 0.000000
[t-SNE] KL divergence after 250 iterations with early exaggeration: 30.055403
[t-SNE] KL divergence after 300 iterations: -0.204940
              K-means  Isolation Forest
f1_score     0.285714          0.000000
accuracy     0.997903          0.997483
sensitivity  1.000000          0.999580
specificity  0.166667          0.000000
recall       1.000000          0.000000
{'start_time': Timestamp('2023-04-23 04:35:00'), 'end_time': Timestamp('2023-04-23 04:40:00'), 'k_means_metrics': {'f1_score': 0.2857142857142857, 'accuracy': 0.9979026845637584, 'sensitivity': 1.0, 'specificity': 0.16666666666666666, 'recall': 1.0, 'anomaly_score': 1.254980307512561}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.99748322147651, 'sensitivity': 0.9995796553173603, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.0735774185043494}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 72, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'44bf45f7_count': 0, '1446c0e4_count': 0, 'e811627e_count': 0, '28de9fde_count': 0, 'c0731fc8_count': 16, 'cc7be3e7_count': 0, 'b23d1fae_count': 0, 'e46fff79_count': 24, 'a2da2da6_count': 0, '94ca10d1_count': 0, 'f6b586ef_count': 0, '81f0209d_count': 8, 'e9469db0_count': 8, '9fa80daf_count': 16}}
2023-04-22 05:19:06.626876 2023-04-23 05:19:06.626876
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.156194]
Loading data/structured/Java/application.log_structured.csv
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
2023-04-22 06:15:53.695221 2023-04-23 06:15:53.695221
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.180682]
Loading data/structured/Java/application.log_structured.csv
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 311, in <module>
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:24:01.652519 2023-04-23 06:24:01.652519
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f4beca09f30>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:25:01.146097 2023-04-23 06:25:01.146097
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f5dbdde9f30>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:26:01.458148 2023-04-23 06:26:01.458148
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f839938df30>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:27:01.774100 2023-04-23 06:27:01.774100
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f7a11b55f30>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:28:01.089173 2023-04-23 06:28:01.089173
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7fe72d759f30>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:29:01.400117 2023-04-23 06:29:01.400117
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7ff100d59d20>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:30:01.708229 2023-04-23 06:30:01.708229
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f78bcb91630>: Failed to establish a new connection: [Errno 111] Connection refused))
2023-04-22 06:30:53.544162 2023-04-23 06:30:53.544162
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-22 06:31:02.029610 2023-04-23 06:31:02.029610
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f307ef5d630>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
2023-04-22 06:32:01.411846 2023-04-23 06:32:01.411846
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.194766]
Loading data/structured/Java/application.log_structured.csv
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 311, in <module>
    kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled) 
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 1426, in fit
    self._check_params_vs_input(X)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 1362, in _check_params_vs_input
    super()._check_params_vs_input(X, default_n_init=10)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 859, in _check_params_vs_input
    raise ValueError(
ValueError: n_samples=1 should be >= n_clusters=2.
2023-04-22 06:38:20.568003 2023-04-23 06:38:20.568003
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.236215]
Loading data/structured/Java/application.log_structured.csv
             K-means  Isolation Forest
f1_score        0.00              0.00
accuracy        0.95              0.95
sensitivity     1.00              1.00
specificity     0.00              0.00
recall          0.00              0.00
{'start_time': Timestamp('2023-04-23 06:30:00'), 'end_time': Timestamp('2023-04-23 06:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.95, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.05514705882352941}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.95, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.0006800328719448467}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 10, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'e46fff79_count': 3, '6311e1ad_count': 0, '81f0209d_count': 0, '54637d32_count': 0, 'b23d1fae_count': 1, 'a2da2da6_count': 1, '94ca10d1_count': 0, 'c0731fc8_count': 1, '1446c0e4_count': 1, '44bf45f7_count': 1, 'e811627e_count': 1, 'b42f8edf_count': 1}}
2023-04-22 06:38:50.240873 2023-04-23 06:38:50.240873
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.121034]
Loading data/structured/Java/application.log_structured.csv
2023-04-22 06:40:12.174753 2023-04-23 06:40:12.174753
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.153385]
Loading data/structured/Java/application.log_structured.csv
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-28 21:28:01.766293 2023-04-29 21:28:01.766293
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7faedfb5d630>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-28 21:29:01.150721 2023-04-29 21:29:01.150721
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7fdf26a95630>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-28 21:30:01.452534 2023-04-29 21:30:01.452534
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7ffa508a1630>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-28 21:31:01.763032 2023-04-29 21:31:01.763032
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 285, in perform_request
    meta, resp_body = self.transport.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_transport.py", line 329, in perform_request
    meta, raw_data = node.perform_request(
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py", line 199, in perform_request
    raise err from None
elastic_transport.ConnectionError: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7fa10ece1630>: Failed to establish a new connection: [Errno 111] Connection refused))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
2023-04-28 21:32:01.184889 2023-04-29 21:32:01.184889
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 109, in <module>
    log_file_path = fetch_logs(start_time, end_time)
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 100, in fetch_logs
    search_result = es.search(index='spring-elk-logs', body=search_body)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 3857, in search
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.ApiError: ApiError(503, 'search_phase_execution_exception', None)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
2023-04-28 21:33:01.605196 2023-04-29 21:33:01.605196
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.168541]
Loading data/structured/Java/application.log_structured.csv
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 311, in <module>
    kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled) 
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 1426, in fit
    self._check_params_vs_input(X)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 1362, in _check_params_vs_input
    super()._check_params_vs_input(X, default_n_init=10)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py", line 859, in _check_params_vs_input
    raise ValueError(
ValueError: n_samples=1 should be >= n_clusters=2.
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:34:01.688567 2023-04-29 21:34:01.688567
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.216267]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.31043166023051244}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.02993295170901017}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 2, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 1, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 1}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:35:01.390313 2023-04-29 21:35:01.390313
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.208698]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.3362141503358462}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.03158232353330148}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 4, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 2, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 2}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
Executing cron job
Executing cron job
Executing cron job
Executing cron job
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:41:01.173084 2023-04-29 21:41:01.173084
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.257994]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.32574430525081094}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.03541306426951496}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 6, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 3, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 3}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:42:01.749629 2023-04-29 21:42:01.749629
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.262749]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.3279492672298012}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.039091420362447615}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 8, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 4, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 4}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:43:01.896985 2023-04-29 21:43:01.896985
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.277989]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.33616236960614976}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.039091420362447615}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 10, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 5, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 5}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:44:01.333503 2023-04-29 21:44:01.333503
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.292812]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.3507757692426021}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04094017434730368}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 12, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 6, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 6}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:45:01.622017 2023-04-29 21:45:01.622017
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.302720]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.37259778946848954}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04465694505449136}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 14, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 7, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 7}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:46:01.118832 2023-04-29 21:46:01.118832
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.332054]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.402242675982092}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 16, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 8, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 8}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:47:01.616070 2023-04-29 21:47:01.616070
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.353724]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.4401346725549916}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 18, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 9, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 9}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:48:01.608988 2023-04-29 21:48:01.608988
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.359290]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.4865656737227809}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 20, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 10, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 10}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:472: RuntimeWarning: invalid value encountered in scalar divide
  sensitivity = cf[0,0]/(cf[:,0].sum())
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
2023-04-28 21:49:01.977534 2023-04-29 21:49:01.977534
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.369514]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000               0.0
accuracy     0.998952               0.0
sensitivity  1.000000               NaN
specificity  0.000000               0.0
recall       0.000000               0.0
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.491971604690209}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.0, 'sensitivity': nan, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 22, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 11, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 11}}
Traceback (most recent call last):
  File "/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py", line 565, in <module>
    es.index(index=index_name, document=window_summary)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py", line 414, in wrapped
    return api(*args, **kwargs)
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py", line 2316, in index
    return self.perform_request(  # type: ignore[return-value]
  File "/home/ubuntu/.local/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py", line 320, in perform_request
    raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(
elasticsearch.BadRequestError: BadRequestError(400, 'mapper_parsing_exception', 'failed to parse')
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:50:01.758665 2023-04-29 21:50:01.758665
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.388532]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.4995068501933691}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 24, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 12, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 12}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:51:01.125000 2023-04-29 21:51:01.125000
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.433652]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.508034521616968}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 26, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 13, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 13}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:52:01.606547 2023-04-29 21:52:01.606547
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.434095]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5169138129784832}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 28, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 14, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 14}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:53:01.761244 2023-04-29 21:53:01.761244
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.464191]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5257813599972908}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 30, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 15, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 15}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:54:01.171211 2023-04-29 21:54:01.171211
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.460736]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5344333207816044}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 32, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 16, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 16}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:55:01.812272 2023-04-29 21:55:01.812272
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.481269]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5427594453490784}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 34, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 17, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 17}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:56:01.419719 2023-04-29 21:56:01.419719
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.498049]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5507051072739791}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 36, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 18, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 18}}
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:80: DeprecationWarning: The 'timeout' parameter is deprecated in favor of 'request_timeout'
  es = Elasticsearch(["{}:{}".format(AWS_HOSTNAME, ELASTIC_PORT)],timeout=30)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: DeprecationWarning: The 'body' parameter is deprecated and will be removed in a future version. Instead use individual parameters.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:100: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  search_result = es.search(index='spring-elk-logs', body=search_body)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (4). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (5). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (6). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (7). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (8). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (9). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (10). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (11). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (12). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (13). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:870: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
  warnings.warn(
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:311: ConvergenceWarning: Number of distinct clusters (3) found smaller than n_clusters (14). Possibly due to duplicate points in X.
  kmeans[i] = KMeans(n_clusters=i, random_state=RANDOM_STATE).fit(data_scaled)
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/base.py:439: UserWarning: X does not have valid feature names, but IsolationForest was fitted with feature names
  warnings.warn(
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/.local/lib/python3.10/site-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Recall is ill-defined and being set to 0.0 due to no true samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/home/ubuntu/Anomaly-Detection/anomaly-detection-ml/log_analysis/approach-3.py:565: ElasticsearchWarning: Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.
  es.index(index=index_name, document=window_summary)
2023-04-28 21:57:01.132820 2023-04-29 21:57:01.132820
Logs fetched from elasticsearch and file is generated  at data/unstructured/Java/application.log
Parsing file: data/unstructured/Java/application.log
Processed 100.0% of log lines.
Parsing done. [Time taken: 0:00:00.502217]
Loading data/structured/Java/application.log_structured.csv
              K-means  Isolation Forest
f1_score     0.000000          0.000000
accuracy     0.998952          0.999476
sensitivity  1.000000          1.000000
specificity  0.000000          0.000000
recall       0.000000          0.000000
{'start_time': Timestamp('2023-04-29 21:30:00'), 'end_time': Timestamp('2023-04-29 21:35:00'), 'k_means_metrics': {'f1_score': 0.0, 'accuracy': 0.998952331063384, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': 0.5582489065727076}, 'isolation_forest_metrics': {'f1_score': 0.0, 'accuracy': 0.9994761655316919, 'sensitivity': 1.0, 'specificity': 0.0, 'recall': 0.0, 'anomaly_score': -0.04652500635201284}, 'log_level_counts': {'WARN_count': 0, 'INFO_count': 38, 'DEBUG_count': 0, 'TRACE_count': 0, 'ERROR_count': 0, 'FATAL_count': 0}, 'template_counts': {'1446c0e4_count': 0, '44bf45f7_count': 0, 'e811627e_count': 0, 'e46fff79_count': 0, 'c0731fc8_count': 19, 'b42f8edf_count': 0, '5f2ddae0_count': 0, 'a2da2da6_count': 0, '3ac22222_count': 19}}
